---
title: "Mysql事务完全解读"
date: 2022-04-25T18:13:32+08:00
description: "Mysql事务完全解读"
hideToc: false
enableToc: true
enableTocContent: false
author: leoay
authorEmoji: 🎅
pinned: false
description: "MySQL MySQL主从同步"
tags:
- 主从同步
- MySQL
series:

categories:
- MySQL
image: /images/face/MYSQL_Color_3-405x405.png
---

### 1. 事务的定义和作用

数据库中的事务是指对数据库执行一批操作，在同一个事务当中，这些操作最终要么全部执行成功，要么全部失败，不会存在部分成功的情况。

事务是一个原子操作。是一个最小执行单元。可以甶一个或多个SQL语句组成
在同一个事务当中，所有的SQL语句都成功执行时，整个事务成功，有一个SQL语句执行失败，整个事务都执行失败。

举个例子：

比如A用户给B用户转账100操作，过程如下：

从A账户扣100
给B账户加100
如果在事务的支持下，上面最终只有2种结果：

操作成功：A账户减少100；B账户增加100
操作失败：A、B两个账户都没有发生变化
如果没有事务的支持，可能出现错：A账户减少了100，此时系统挂了，导致B账户没有加上100，而A账户凭空少了100。

### 2. 事务的几个特性(ACID) -重点

#### 原子性(Atomicity)
事务的整个过程如原子操作一样，最终要么全部成功，或者全部失败，这个原子性是从最终结果来看的，从最终结果来看这个过程是不可分割的。

#### 一致性(Consistency)
一个事务必须使数据库从一个一致性状态变换到另一个一致性状态。

首先回顾一下一致性的定义。所谓一致性，指的是数据处于一种有意义的状态，这种状态是语义上的而不是语法上的。最常见的例子是转帐。例如从帐户A转一笔钱到帐户B上，如果帐户A上的钱减少了，而帐户B上的钱却没有增加，那么我们认为此时数据处于不一致的状态。

从这段话的理解来看，所谓一致性，即，从实际的业务逻辑上来说，最终结果是对的、是跟程序员的所期望的结果完全符合的

#### 隔离性(Isolation)
一个事务的执行不能被其他事务干扰。即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能互相干扰。

这里先提一下事务的隔离级别：
读未提交：read uncommitted
读已提交：read committed
可重复读：repeatable read
串行化：serializable

#### 持久性(Durability)
一个事务一旦提交，他对数据库中数据的改变就应该是永久性的。当事务提交之后，数据会持久化到硬盘，修改是永久性的。
